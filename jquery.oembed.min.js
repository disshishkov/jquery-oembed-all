(function(d){d.fn.OEmbedYoutube=function(e){b=d.extend(!0,d.fn.OEmbedYoutube.defaults,e);return this.each(function(){var c=d(this),a=c.attr("href");b.onEmbed||(b.onEmbed=function(a){_insertCode(this,a)});var e=/youtube\.com\/watch.+v=[\w-]+&?/i;null!==a&&void 0!==a&&null!==a.match(e)?(e=new d.fn.OEmbedYoutube.OEmbedProvider("https://www.youtube.com/embed/$1?wmode=transparent",{templateRegex:/.*(?:v\=|be\/|embed\/)([\w\-]+)&?.*/,embedtag:{tag:"iframe",width:"425",height:"349"}}),e.maxWidth=b.maxWidth, e.maxHeight=b.maxHeight,_embedCode(c,a,e)):null!==b.onProviderNotFound&&b.onProviderNotFound.call(c,a);return c})};var b;d.fn.OEmbedYoutube.defaults={maxWidth:null,maxHeight:null,includeHandle:!0,replaceLink:!0,onProviderNotFound:null,beforeEmbed:null,afterEmbed:null,onEmbed:null};_embedCode=function(e,c,a){c={code:d("<"+a.embedtag.tag+"/>").attr("src",c.replace(a.templateRegex,a.apiendpoint)).attr("width",a.embedtag.width||"auto").attr("height",a.embedtag.height||"auto").attr("allowfullscreen","true").attr("allowscriptaccess", "always").attr("scrolling","no").attr("frameborder","0").css("max-height",b.maxHeight||"auto").css("max-width",b.maxWidth||"auto")};null!=b.beforeEmbed&&b.beforeEmbed.call(e,c);b.onEmbed.call(e,c);null!=b.afterEmbed&&b.afterEmbed.call(e,c)};_insertCode=function(e,c){if(null!==c){e.wrap("<div></div>");var a=e.parent();b.replaceLink&&e.remove();b.includeHandle&&!b.replaceLink&&d("<span>&darr;</span>").insertBefore(e).click(function(){var a=d(this),b=window.encodeURIComponent(a.text());a.html("%E2%86%91"== b?"&darr;":"&uarr;");a.parent().children().last().toggle()});a.append("<br/>");try{c.code.clone().appendTo(a)}catch(k){a.append(c.code)}if(b.maxWidth){var f=a.parent().width();if(f<b.maxWidth){var g=d("iframe",a).width(),h=d("iframe",a).height(),f=g/f;d("iframe",a).width(g/f);d("iframe",a).height(h/f)}else b.maxWidth&&d("iframe",a).width(b.maxWidth),b.maxHeight&&d("iframe",a).height(b.maxHeight)}}};d.fn.OEmbedYoutube.OEmbedProvider=function(b,c){this.apiendpoint=b;this.maxWidth=500;this.maxHeight= 400;c=c||{};for(var a in c)this[a]=c[a];this.embedtag=this.embedtag||{tag:""}}})(jQuery);